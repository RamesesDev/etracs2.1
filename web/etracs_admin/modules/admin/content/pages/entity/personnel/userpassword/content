<script>
	\$put( 
		"${PAGE.context}",
		new function() {
			var svc = Service.lookup( "admin/UserAccountService" );
			this.useraccount;
			this.confirmpwd;
			this.save = function() {
				if( this.confirmpwd != this.useraccount.newpassword) {
					alert('Confirm password must match password specified');
					return;
				}
				svc.changePassword( this.useraccount );
				alert('Password successfully changed');
				return "_close";
			}
			
			this.cancel = function() {
				if( confirm( "Discard changes?")) {
					return "_close";
				}
			}
		}
	);
</script>

<table cellpadding="0" cellspacing="0" width="100%">
	<tr>
		<td class="label">User ID:</td>
		<td>
			<label r:context="${PAGE.context}" r:name="useraccount.username"/>
		</td>
	</tr>
	<tr>
		<td class="label">Old Password:</td>
		<td>
			<input type="password" r:context="${PAGE.context}" r:name="useraccount.oldpassword"  r:required="true" r:caption="Old Password"/>
		</td>
	</tr>
	<tr>
		<td class="label">New Pwd:</td>
		<td>
			<input type="password" r:context="${PAGE.context}" r:name="useraccount.newpassword"  r:required="true" r:caption="New Password"/>
		</td>
	</tr>
	<tr>
		<td class="label">Confirm Pwd:</td>
		<td>
			<input type="password" r:context="${PAGE.context}" r:name="confirmpwd"  r:required="true" r:caption="Confirm Password"/>
		</td>
	</tr>
</table>